<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kattour Playground</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
</head>
<body class="bg-gray-900 text-gray-300 font-sans">

  <!-- Header -->
  <header x-data="{ open: false }" class="bg-gray-900/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-800">
    <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center gap-3">
          <a href="index.html" class="flex items-center gap-3"><img src="assets/images/logo.png" alt="Kattour Logo" class="w-9 h-9" /><h1 class="text-2xl font-bold tracking-wide text-white">Kattour</h1></a>
        </div>
        <div class="hidden md:flex items-center space-x-6 text-sm font-medium">
          <a href="index.html" class="text-gray-300 hover:text-white transition">Home</a>
          <a href="docs.html" class="text-gray-300 hover:text-white transition">Docs</a>
          <a href="examples.html" class="text-gray-300 hover:text-white transition">Examples</a>
          <a href="modules.html" class="text-gray-300 hover:text-white transition">Modules</a>
          <a href="mobile.html" class="text-gray-300 hover:text-white transition">Mobile</a>
          <a href="playground.html" class="text-indigo-400 font-bold">Playground</a>
        </div>
        <div class="md:hidden"><button @click="open = !open" class="text-gray-300 hover:text-white focus:outline-none"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" /></svg></button></div>
      </div>
    </nav>
    <div x-show="open" @click.away="open = false" class="md:hidden"><div class="px-2 pt-2 pb-3 space-y-1 sm:px-3"><a href="index.html" class="block px-3 py-2 text-base font-medium">Home</a><a href="docs.html" class="block px-3 py-2 text-base font-medium">Docs</a><a href="examples.html" class="block px-3 py-2 text-base font-medium">Examples</a><a href="modules.html" class="block px-3 py-2 text-base font-medium">Modules</a><a href="mobile.html" class="block px-3 py-2 text-base font-medium">Mobile</a><a href="playground.html" class="block px-3 py-2 text-base font-medium text-indigo-400">Playground</a></div></div>
  </header>
  
  <main class="p-4 sm:p-8">
    <div class="text-center mb-8">
        <h2 class="text-4xl font-extrabold text-white">ðŸ§ª Kattour Playground</h2>
        <p class="mt-4 text-lg text-gray-400">The definitive real-time editor. Any valid Kattour code will render here.</p>
    </div>

    <div class="grid lg:grid-cols-2 gap-8">
        <div>
            <label for="editor" class="block text-sm font-medium text-white mb-2">Kattour Code Editor</label>
            <textarea id="editor" class="w-full h-[32rem] p-4 border border-gray-700 rounded-lg font-mono bg-gray-900 text-gray-200 focus:ring-2 focus:ring-indigo-500 focus:outline-none"></textarea>
            <div class="flex gap-2 mt-4">
                <button onclick="compile()" class="w-full bg-indigo-600 text-white px-4 py-2.5 rounded-lg font-semibold hover:bg-indigo-500 transition">Render</button>
                <button onclick="clearEditor()" class="w-1/3 bg-gray-600 text-white px-4 py-2.5 rounded-lg font-semibold hover:bg-gray-500 transition">Clear</button>
            </div>
        </div>

        <div class="mt-6 lg:mt-0">
            <label class="block text-sm font-medium text-white mb-2">Live Preview</label>
            <div id="output" class="h-full min-h-[32rem] space-y-4 bg-gray-800 p-6 rounded-lg border border-gray-700 overflow-auto"></div>
        </div>
    </div>
  </main>
  
  <footer class="text-center text-sm text-gray-500 py-6 border-t border-gray-800 mt-10">
    Â© 2025 Kattour Language.
  </footer>

  <script>
    const editor = document.getElementById('editor');

    function clearEditor() {
        editor.value = '';
        compile();
    }
    
    // --- THE UNIVERSAL Kattour RENDERER ---
    const RENDERERS = {
        render(parsedData) {
            if (!parsedData || typeof parsedData !== 'object') return '';
            const type = Object.keys(parsedData)[0];
            const data = parsedData[type];
            if (this[type]) return this[type](data);
            return `<div class="text-red-400">Unknown component type: ${type}</div>`;
        },

        // --- MODULES ---
        module(data) {
            const moduleType = (data.type || '').toLowerCase();
            if (moduleType.startsWith('card')) return this.card(data);
            if (moduleType.startsWith('form')) return this.form(data);
            if (moduleType.startsWith('navigation')) return this.navigation(data);
            if (moduleType.startsWith('alert')) return this.alert(data);
            if (moduleType.startsWith('section')) return this.section(data);
            if (moduleType.startsWith('input')) return this.input(data);
            if (moduleType.startsWith('overlay')) return this.overlay(data);
            if (moduleType.startsWith('disclosure')) return this.disclosure(data);
            return `<div class="text-red-400">Unknown module type: ${data.type}</div>`;
        },

        // --- ALL COMPONENT IMPLEMENTATIONS ---
        card(data) {
            const cardData = data.data || {};
            switch (data.type) {
                case 'user-profile':
                    const actions = (data.actions || []).map(action => {
                        const btnClass = action.style === 'primary' ? 'bg-indigo-500 hover:bg-indigo-400' : 'bg-gray-700 ring-1 ring-inset ring-gray-600 hover:bg-gray-600';
                        return `<button class="rounded-md px-4 py-2 text-sm font-semibold text-white ${btnClass}">${action.text}</button>`;
                    }).join('');
                    return `<div class="bg-gray-900 p-8 rounded-lg flex justify-center"><div class="w-full max-w-sm text-center bg-gray-800 border border-gray-700 rounded-lg p-6"><img class="w-24 h-24 rounded-full mx-auto ring-4 ring-indigo-500/50" src="${cardData.avatar}" alt="Avatar"><div class="mt-4"><h3 class="text-xl font-bold text-white">${cardData.name}</h3><p class="text-sm text-indigo-400">${cardData.handle}</p><p class="mt-2 text-sm text-gray-400">${cardData.title}</p></div><div class="mt-6 flex gap-4 justify-center">${actions}</div></div></div>`;
                
                case 'feed-item':
                     const feedActions = (cardData.actions || []).map(action => `<button class="flex items-center gap-1.5 text-sm text-gray-400 hover:text-white">${action}</button>`).join('');
                    return `<div class="bg-gray-900/50 p-4 rounded-lg max-w-sm mx-auto w-full"><div class="flex items-center gap-3"><img class="h-10 w-10 rounded-full" src="${cardData.user?.avatar}" alt="Avatar"><div><p class="font-semibold text-white">${cardData.user?.name}</p><p class="text-xs text-gray-400">Just now</p></div></div><p class="mt-4 text-gray-300">${cardData.content}</p><div class="mt-4 pt-3 border-t border-gray-700 flex justify-around">${feedActions}</div></div>`;

                case 'product':
                    return `<div class="bg-gray-900 p-8 rounded-lg flex justify-center"><div class="w-full max-w-xs overflow-hidden rounded-lg bg-gray-800 border border-gray-700 shadow-lg"><img class="h-48 w-full object-cover" src="${cardData.image}" alt="Product"><div class="p-4"><p class="text-xs text-gray-400">${cardData.category}</p><h3 class="mt-1 text-lg font-semibold text-white">${cardData.name}</h3><div class="mt-2 flex items-center justify-between"><p class="text-xl font-bold text-indigo-400">${cardData.price}</p></div><button class="mt-4 w-full rounded-md bg-indigo-500 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-400">${data.action?.text || 'Add to cart'}</button></div></div></div>`;
                
                case 'pricing-tier':
                     const features = (data.features || []).map(f => `<li class="flex gap-x-3"><svg class="h-6 w-5 flex-none text-indigo-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.052-.143z" clip-rule="evenodd" /></svg>${f}</li>`).join('');
                     return `<div class="bg-gray-900 p-8 rounded-lg flex justify-center"><div class="relative w-full max-w-sm rounded-2xl bg-gray-800 p-8 ring-2 ring-indigo-500"><h3 class="text-lg font-semibold leading-8 text-white">${data.plan?.name}</h3><p class="mt-4 text-sm leading-6 text-gray-300">${data.plan?.description}</p><p class="mt-6 flex items-baseline gap-x-1"><span class="text-4xl font-bold tracking-tight text-white">${data.plan?.price}</span><span class="text-sm font-semibold leading-6 text-gray-300">${data.plan?.frequency}</span></p><a href="#" class="mt-6 block rounded-md bg-indigo-500 px-3 py-2 text-center text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-400">${data.action?.text}</a><ul role="list" class="mt-8 space-y-3 text-sm leading-6 text-gray-300">${features}</ul></div></div>`;

                default:
                    return `<div class="text-red-400">Unknown card type: ${data.type}</div>`;
            }
        },
        
        form(data) {
            const fields = (data.fields || []).map(field => `<div><label class="block text-sm font-medium text-gray-300">${field.label}</label><input type="${field.type || 'text'}" placeholder="${field.placeholder || ''}" class="mt-2 block w-full rounded-md border-0 bg-white/5 py-2 px-3 text-white ring-1 ring-inset ring-white/10 focus:ring-indigo-500"></div>`).join('');
            const actions = (data.actions || []).map(action => `<button type="submit" class="flex w-full justify-center rounded-md bg-indigo-500 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-400">${action.text}</button>`).join('');
            return `<div class="bg-gray-900 p-8 rounded-lg flex justify-center"><div class="w-full max-w-sm"><h3 class="text-2xl font-bold text-center text-white">${data.title || 'Form'}</h3><form class="mt-8 space-y-6">${fields}<br>${actions}</form></div></div>`;
        },

        alert(data) {
             return `<div class="bg-gray-900 p-8 rounded-lg flex justify-center"><div class="w-full max-w-md rounded-md bg-green-500/20 p-4 border border-green-500/50"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-green-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z" clip-rule="evenodd" /></svg></div><div class="ml-3"><h3 class="text-sm font-medium text-green-300">${data.title}</h3><div class="mt-2 text-sm text-green-400"><p>${data.message}</p></div></div></div></div></div>`;
        }
    };

    function compile() {
        try {
            const code = editor.value;
            if (!code.trim()) {
                document.getElementById('output').innerHTML = '<p class="text-gray-500">Editor is empty. Start typing or paste your Kattour code.</p>';
                return;
            }
            
            const parsed = jsyaml.load(code);
            const html = RENDERERS.render(parsed);
            
            document.getElementById('output').innerHTML = html || `<p class="text-yellow-400">No components rendered. Check your syntax.</p>`;
        } catch (error) {
            document.getElementById('output').innerHTML = `<div class="text-red-400 font-mono text-sm"><p class="font-bold mb-2">Parsing Error:</p><pre>${error.message.split('\n')[0]}</pre></div>`;
        }
    }

    editor.addEventListener('input', compile);
    document.addEventListener('DOMContentLoaded', () => {
        editor.value = defaultCode;
        compile();
    });

  </script>
</body>
</html>
